<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Hub</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-app-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-auth-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-firestore-compat.min.js"></script>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .modal-enter { opacity: 0; transform: scale(0.95); }
        .modal-enter-active { opacity: 1; transform: scale(1); transition: opacity 300ms, transform 300ms; }
        .modal-exit { opacity: 1; transform: scale(1); }
        .modal-exit-active { opacity: 0; transform: scale(0.95); transition: opacity 300ms, transform 300ms; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCBN6opABavXAJCvCnRvghYU4E0faOM7ng",
            authDomain: "community-hub-saltproject.firebaseapp.com",
            projectId: "community-hub-saltproject",
            storageBucket: "community-hub-saltproject.firebasestorage.app",
            messagingSenderId: "1007010017446",
            appId: "1:1007010017446:web:06f371a8755fb509968467"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }

        const auth = firebase.auth();
        const db = firebase.firestore();

        // --- Icon Components ---
        const Eye = ({ className = "w-5 h-5" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>);
        const EyeOff = ({ className = "w-5 h-5" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7 .946-2.903 3.11-5.268 5.85-6.333m1.585-1.585A9.92 9.92 0 0112 5c4.478 0 8.268 2.943 9.542 7a10.05 10.05 0 01-2.032 3.998M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path d="M2 2l20 20" /></svg>);
        const Users = ({ className = "w-5 h-5" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" /></svg>);
        const MessageCircle = ({ className = "w-5 h-5" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" /></svg>);
        const Plus = ({ className = "w-4 h-4" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" /></svg>);
        const Building = ({ className = "w-5 h-5" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>);
        const User = ({ className = "w-5 h-5" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>);
        const Send = ({ className = "w-4 h-4" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" /></svg>);
        const LogOut = ({ className = "w-4 h-4" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>);
        const LogIn = ({ className = "w-4 h-4" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1" /></svg>);
        const UserPlus = ({ className = "w-4 h-4" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" /></svg>);
        const Grid = ({ className = "w-4 h-4" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>);
        const List = ({ className = "w-4 h-4" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 10h16M4 14h16M4 18h16" /></svg>);
        const AlertTriangle = ({ className = "w-4 h-4" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z" /></svg>);
        const Edit3 = ({ className="w-4 h-4" }) => (<svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 20h9" /><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" /></svg>);

        function CommunityHub() {
            // State declarations
            const [residents, setResidents] = useState([]);
            const [messages, setMessages] = useState([]);
            const [selectedBuilding, setSelectedBuilding] = useState('');
            const [selectedZone, setSelectedZone] = useState('');
            const [viewMode, setViewMode] = useState('list');
            const [currentUser, setCurrentUser] = useState(null);
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [authMode, setAuthMode] = useState('signin');
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState('');
            
            // Modal and form states
            const [showRegistrationForm, setShowRegistrationForm] = useState(false);
            const [showMessageModal, setShowMessageModal] = useState(false);
            const [showEditProfileModal, setShowEditProfileModal] = useState(false);
            const [showInbox, setShowInbox] = useState(false);
            const [passwordVisible, setPasswordVisible] = useState(false);
            const [confirmPasswordVisible, setConfirmPasswordVisible] = useState(false);

            // Data states
            const [messageRecipient, setMessageRecipient] = useState(null);
            const [messageText, setMessageText] = useState('');
            const [authData, setAuthData] = useState({ email: '', password: '', confirmPassword: '', name: '', zoneId: '', buildingId: '', unitNumber: '', phone: '' });
            const [formData, setFormData] = useState({ name: '', zoneId: '', buildingId: '', unitNumber: '', email: '', phone: '' });
            const [editProfileData, setEditProfileData] = useState({ name: '', phone: '' });

            const isFirebaseConfigured = () => firebaseConfig.apiKey.startsWith("AIza");

            useEffect(() => {
                if (!isFirebaseConfigured()) { setLoading(false); return; }
                const unsubscribe = auth.onAuthStateChanged(async (user) => {
                    if (user) {
                        try {
                            const userDoc = await db.collection('users').doc(user.uid).get();
                            if (userDoc.exists) {
                                const userData = { id: user.uid, ...userDoc.data() };
                                setCurrentUser(userData);
                                setIsAuthenticated(true);
                                await db.collection('users').doc(user.uid).update({ isOnline: true, lastSeen: firebase.firestore.FieldValue.serverTimestamp() });
                            } else { auth.signOut(); }
                        } catch (err) { console.error(err); auth.signOut(); }
                    } else {
                        setCurrentUser(null);
                        setIsAuthenticated(false);
                    }
                    setLoading(false);
                });
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                if (!isAuthenticated) { setResidents([]); return; }
                const unsub = db.collection('users').onSnapshot(snap => {
                    const resData = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    resData.sort((a,b) => a.zoneId.localeCompare(b.zoneId) || a.buildingId.localeCompare(b.buildingId) || parseInt(a.unitNumber) - parseInt(b.unitNumber));
                    setResidents(resData);
                }, err => setError(`Residents Error: ${err.message}`));
                return () => unsub();
            }, [isAuthenticated]);

            useEffect(() => {
                if (!currentUser) { setMessages([]); return; }
                const unsub = db.collection('messages').where('participants', 'array-contains', currentUser.id).orderBy('timestamp', 'desc').onSnapshot(snap => setMessages(snap.docs.map(doc => ({ id: doc.id, ...doc.data() }))), err => console.error(err));
                return () => unsub();
            }, [currentUser]);

            // Handlers
            const handleAuthAction = async (action) => {
                const { email, password, confirmPassword, name, zoneId, buildingId, unitNumber, phone } = authData;
                if (action === 'signup') {
                    if (!email || !password || !name || !zoneId || !buildingId || !unitNumber) return setError('Please fill all required fields.');
                    if (password !== confirmPassword) return setError('Passwords do not match.');
                    if (password.length < 6) return setError('Password must be at least 6 characters.');
                } else {
                    if (!email || !password) return setError('Please enter email and password.');
                }
                setLoading(true); setError('');

                if (action === 'signin') {
                    try {
                        await auth.signInWithEmailAndPassword(email, password);
                        setAuthData({ email: '', password: '', confirmPassword: '', name: '', zoneId: '', buildingId: '', unitNumber: '', phone: '' });
                    } catch (err) {
                        setError(err.message);
                    } finally {
                        setLoading(false);
                    }
                    return;
                }

                let newUser = null;
                try {
                    const existingUnit = await db.collection('users').where('zoneId', '==', zoneId).where('buildingId', '==', buildingId).where('unitNumber', '==', unitNumber).get();
                    if (!existingUnit.empty) throw new Error("This unit is already registered.");
                    
                    const userCred = await auth.createUserWithEmailAndPassword(email, password);
                    newUser = userCred.user;
                    
                    await db.collection('users').doc(newUser.uid).set({
                        email, name, zoneId, buildingId, unitNumber,
                        phone: String(phone || ''),
                        joinedDate: firebase.firestore.FieldValue.serverTimestamp(),
                        isOnline: true,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    setAuthData({ email: '', password: '', confirmPassword: '', name: '', zoneId: '', buildingId: '', unitNumber: '', phone: '' });
                } catch (err) {
                    if (newUser) { await newUser.delete(); }
                    setError(err.message);
                } finally {
                    setLoading(false);
                }
            };

            const handleSignOut = async () => {
                if (currentUser) await db.collection('users').doc(currentUser.id).update({ isOnline: false, lastSeen: firebase.firestore.FieldValue.serverTimestamp() });
                await auth.signOut();
            };

            const handleUpdateProfile = async () => {
                if (!editProfileData.name.trim()) return setError("Name cannot be empty.");
                setLoading(true);
                try {
                    await db.collection('users').doc(currentUser.id).update({ name: editProfileData.name, phone: editProfileData.phone });
                    setShowEditProfileModal(false);
                } catch (err) { setError("Failed to update profile."); } finally { setLoading(false); }
            };

            const getUniqueValues = (key) => [...new Set(residents.map(r => r[key]))].sort();

            if (loading) return <div className="min-h-screen flex items-center justify-center"><div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div></div>;

            if (!isAuthenticated) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-6">
                        <div className="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full">
                            <div className="text-center mb-8">
                                <Building className="w-16 h-16 text-blue-600 mx-auto mb-4" />
                                <h1 className="text-3xl font-bold text-gray-800 mb-2">Community Hub</h1>
                                <p className="text-gray-600">Connect with your neighbors</p>
                            </div>
                            {error && <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert"><span className="block sm:inline">{error}</span></div>}
                            
                            <div className="flex bg-gray-100 rounded-lg p-1 mb-6">
                                <button onClick={() => { setAuthMode('signin'); setError(''); }} className={`flex-1 py-2 px-4 rounded-md transition-colors flex items-center justify-center gap-2 ${authMode === 'signin' ? 'bg-white text-blue-600 shadow' : 'text-gray-600'}`}><LogIn /> Sign In</button>
                                <button onClick={() => { setAuthMode('signup'); setError(''); }} className={`flex-1 py-2 px-4 rounded-md transition-colors flex items-center justify-center gap-2 ${authMode === 'signup' ? 'bg-white text-blue-600 shadow' : 'text-gray-600'}`}><UserPlus /> Sign Up</button>
                            </div>

                            <div className="space-y-4">
                                {authMode === 'signup' && (
                                    <>
                                        <div><label className="block text-sm font-medium text-gray-700 mb-1">Full Name *</label><input type="text" value={authData.name} onChange={(e) => setAuthData({...authData, name: e.target.value})} className="w-full px-4 py-2 border border-gray-300 rounded-lg"/></div>
                                        <div className="grid grid-cols-3 gap-3">
                                            <div><label className="block text-sm font-medium text-gray-700 mb-1">Zone *</label><input type="text" value={authData.zoneId} onChange={(e) => setAuthData({...authData, zoneId: e.target.value})} className="w-full px-4 py-2 border border-gray-300 rounded-lg" placeholder="B1"/></div>
                                            <div><label className="block text-sm font-medium text-gray-700 mb-1">Building *</label><input type="text" value={authData.buildingId} onChange={(e) => setAuthData({...authData, buildingId: e.target.value})} className="w-full px-4 py-2 border border-gray-300 rounded-lg" placeholder="CH16"/></div>
                                            <div><label className="block text-sm font-medium text-gray-700 mb-1">Unit *</label><input type="text" value={authData.unitNumber} onChange={(e) => setAuthData({...authData, unitNumber: e.target.value})} className="w-full px-4 py-2 border border-gray-300 rounded-lg" placeholder="401"/></div>
                                        </div>
                                        <div><label className="block text-sm font-medium text-gray-700 mb-1">Phone (Optional)</label><input type="tel" value={authData.phone} onChange={(e) => setAuthData({...authData, phone: e.target.value})} className="w-full px-4 py-2 border border-gray-300 rounded-lg"/></div>
                                    </>
                                )}
                                <div><label className="block text-sm font-medium text-gray-700 mb-1">Email *</label><input type="email" value={authData.email} onChange={(e) => setAuthData({...authData, email: e.target.value})} className="w-full px-4 py-2 border border-gray-300 rounded-lg"/></div>
                                <div className="relative"><label className="block text-sm font-medium text-gray-700 mb-1">Password *</label><input type={passwordVisible ? "text" : "password"} value={authData.password} onChange={(e) => setAuthData({...authData, password: e.target.value})} className="w-full px-4 py-2 border border-gray-300 rounded-lg"/><button onClick={() => setPasswordVisible(!passwordVisible)} className="absolute inset-y-0 right-0 top-6 pr-3 flex items-center text-sm leading-5 text-gray-500">{passwordVisible ? <EyeOff /> : <Eye />}</button></div>
                                {authMode === 'signup' && <div className="relative"><label className="block text-sm font-medium text-gray-700 mb-1">Confirm Password *</label><input type={confirmPasswordVisible ? "text" : "password"} value={authData.confirmPassword} onChange={(e) => setAuthData({...authData, confirmPassword: e.target.value})} className="w-full px-4 py-2 border border-gray-300 rounded-lg"/><button onClick={() => setConfirmPasswordVisible(!confirmPasswordVisible)} className="absolute inset-y-0 right-0 top-6 pr-3 flex items-center text-sm leading-5 text-gray-500">{confirmPasswordVisible ? <EyeOff /> : <Eye />}</button></div>}
                                <button onClick={() => handleAuthAction(authMode)} disabled={loading} className="w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50">{loading ? 'Please wait...' : (authMode === 'signin' ? 'Sign In' : 'Create Account')}</button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white rounded-xl shadow-lg p-8 mb-8">
                             {/* Header */}
                            <div className="flex flex-wrap items-center justify-between mb-6 gap-4">
                                <div className="flex items-center gap-3">
                                    <Building className="text-blue-600 w-8 h-8" />
                                    <div>
                                        <h1 className="text-3xl font-bold text-gray-800">Community Hub</h1>
                                        <p className="text-gray-600">Welcome, {currentUser.name}</p>
                                    </div>
                                </div>
                                <div className="flex items-center gap-3">
                                    <button onClick={() => { setEditProfileData({ name: currentUser.name, phone: currentUser.phone || '' }); setShowEditProfileModal(true); }} className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-all duration-300 hover:shadow-lg"><Edit3 /> Edit Profile</button>
                                    <button onClick={handleSignOut} className="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center gap-2 transition-all duration-300 hover:shadow-lg"><LogOut /> Sign Out</button>
                                </div>
                            </div>
                        </div>
                        
                        {/* Modals */}
                        {showEditProfileModal && (
                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 modal-enter-active">
                                <div className="bg-white rounded-xl p-8 max-w-md w-full">
                                    <h2 className="text-2xl font-bold mb-4">Edit Profile</h2>
                                    {error && <p className="text-red-500 text-sm mb-4">{error}</p>}
                                    <input value={editProfileData.name} onChange={e => setEditProfileData({...editProfileData, name: e.target.value})} className="w-full p-2 border rounded mb-2" placeholder="Name"/>
                                    <input value={editProfileData.phone} onChange={e => setEditProfileData({...editProfileData, phone: e.target.value})} className="w-full p-2 border rounded mb-4" placeholder="Phone"/>
                                    <div className="flex justify-end gap-4">
                                        <button onClick={() => setShowEditProfileModal(false)} className="bg-gray-300 px-4 py-2 rounded">Cancel</button>
                                        <button onClick={handleUpdateProfile} className="bg-blue-600 text-white px-4 py-2 rounded">Save Changes</button>
                                    </div>
                                </div>
                            </div>
                        )}
                        
                        {/* Resident Directory Content */}
                        <div className="bg-white rounded-xl shadow-lg p-8">
                            <div className="flex flex-wrap items-center justify-between gap-4 mb-6">
                                <h2 className="text-2xl font-bold text-gray-800">Resident Directory</h2>
                                <div className="flex items-center gap-4">
                                    <select value={selectedZone} onChange={e => setSelectedZone(e.target.value)} className="px-4 py-2 border border-gray-300 rounded-lg">
                                        <option value="">All Zones</option>
                                        {getUniqueValues('zoneId').map(zone => <option key={zone} value={zone}>Zone {zone}</option>)}
                                    </select>
                                    <div className="flex bg-gray-200 rounded-lg p-1">
                                        <button onClick={() => setViewMode('list')} className={`px-4 py-2 rounded-md flex items-center gap-2 ${viewMode === 'list' ? 'bg-white text-blue-600 shadow' : 'text-gray-600'}`}><List /> List</button>
                                        <button onClick={() => setViewMode('visual')} className={`px-4 py-2 rounded-md flex items-center gap-2 ${viewMode === 'visual' ? 'bg-white text-blue-600 shadow' : 'text-gray-600'}`}><Grid /> Visual</button>
                                    </div>
                                </div>
                            </div>

                            {viewMode === 'list' ? (
                                <div className="overflow-x-auto">
                                    <table className="min-w-full bg-white">
                                        <thead className="bg-gray-100">
                                            <tr>
                                                <th className="text-left py-3 px-4 font-semibold text-sm">Name</th>
                                                <th className="text-left py-3 px-4 font-semibold text-sm">Unit</th>
                                                <th className="text-left py-3 px-4 font-semibold text-sm">Contact</th>
                                                <th className="text-left py-3 px-4 font-semibold text-sm">Status</th>
                                                <th className="text-left py-3 px-4 font-semibold text-sm">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {residents.filter(r => !selectedZone || r.zoneId === selectedZone).map(resident => (
                                                <tr key={resident.id} className="border-b hover:bg-gray-50 transition-colors duration-200">
                                                    <td className="py-3 px-4">{resident.name}</td>
                                                    <td className="py-3 px-4">Zone {resident.zoneId}, Bldg {resident.buildingId}, Unit {resident.unitNumber}</td>
                                                    <td className="py-3 px-4">{resident.email}{resident.phone && `, ${resident.phone}`}</td>
                                                    <td className="py-3 px-4">{resident.isOnline ? <span className="text-green-500">Online</span> : 'Offline'}</td>
                                                    <td className="py-3 px-4">
                                                        {currentUser.id !== resident.id && <button className="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm">Message</button>}
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            ) : (
                                <div>
                                    <p>Visual view coming soon!</p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<CommunityHub />, document.getElementById('root'));
    </script>
</body>
</html>
